{
  "address": "0x6fd341CBfa880f0f6be4aFEc356d9F0B624e2715",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_tellorOracle",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "ReentrancyGuardReentrantCall",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "Staked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "principal",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "interest",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "Withdrawn",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "BPS_DENOM",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "ETH_QUERY_ID",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "ETH_THRESHOLD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "HIGH_APR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "LOW_APR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "accruedInterest",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "balances",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "calculateInterest",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getCurrentAPR",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getETHPrice",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getTotalBalance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_tellor",
          "type": "address"
        }
      ],
      "name": "setTellorOracle",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "stake",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "stakeTimestamps",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "tellorOracle",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalStaked",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "withdraw",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "transactionHash": "0x5eaef9ca9ef7150543fa5f7bfe89f9e01ef8fc6001901f4d57bad51295afbdfa",
  "receipt": {
    "to": null,
    "from": "0x812c387DA330E1FC91Cb54FA5B42f3ed811769B3",
    "contractAddress": "0x6fd341CBfa880f0f6be4aFEc356d9F0B624e2715",
    "transactionIndex": 78,
    "gasUsed": "754279",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x5c913ac46735870154c799084c841307965bc92d86fa836ce2ffc71886d56cd9",
    "transactionHash": "0x5eaef9ca9ef7150543fa5f7bfe89f9e01ef8fc6001901f4d57bad51295afbdfa",
    "logs": [],
    "blockNumber": 9712763,
    "cumulativeGasUsed": "52611775",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xD9157453E2668B2fc45b7A803D3FEF3642430cC0"
  ],
  "numDeployments": 1,
  "solcInputHash": "dd30c84e047179e1c5570dc87ebac04e",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_tellorOracle\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"ReentrancyGuardReentrantCall\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"}],\"name\":\"Staked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"principal\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"interest\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"}],\"name\":\"Withdrawn\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"BPS_DENOM\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"ETH_QUERY_ID\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"ETH_THRESHOLD\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"HIGH_APR\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LOW_APR\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"accruedInterest\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"balances\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"calculateInterest\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getCurrentAPR\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getETHPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"getTotalBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_tellor\",\"type\":\"address\"}],\"name\":\"setTellorOracle\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stake\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"stakeTimestamps\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"tellorOracle\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalStaked\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"details\":\"Simple ETH savings vault with per-user simple interest.      APR dynamically changes based on ETH/USD price from the Tellor oracle. Logic:  - If ETH < $3000 \\u2192 APR = 6%  - If ETH \\u2265 $3000 \\u2192 APR = 3%  APR is in basis points:      600 \\u2192 6%      300 \\u2192 3%  Simple Interest Formula:      interest = principal * aprBps * timeElapsed / (365 days * 10000)\",\"errors\":{\"ReentrancyGuardReentrantCall()\":[{\"details\":\"Unauthorized reentrant call.\"}]},\"kind\":\"dev\",\"methods\":{},\"title\":\"CryptoSavingsVault\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"BPS_DENOM()\":{\"notice\":\"Basis points denominator\"},\"ETH_QUERY_ID()\":{\"notice\":\"Tellor query id for ETH/USD\"},\"ETH_THRESHOLD()\":{\"notice\":\"Threshold for switching APR (18 decimals)\"},\"HIGH_APR()\":{\"notice\":\"APR when ETH < $3000 (6%)\"},\"LOW_APR()\":{\"notice\":\"APR when ETH >= $3000 (3%)\"},\"accruedInterest(address)\":{\"notice\":\"interest accumulated but not yet withdrawn (in wei)\"},\"balances(address)\":{\"notice\":\"principal staked per user (in wei)\"},\"getCurrentAPR()\":{\"notice\":\"Return current APR in basis points depending on ETH price.\"},\"getETHPrice()\":{\"notice\":\"Get ETH/USD price from Tellor (18 decimals). Fallback \\u2192 threshold (forces LOW_APR).\"},\"stake()\":{\"notice\":\"Stake ETH into the vault. Moves any pending interest into accruedInterest & resets timestamp.\"},\"stakeTimestamps(address)\":{\"notice\":\"timestamp when user last updated stake (for interest calculation)\"},\"tellorOracle()\":{\"notice\":\"Tellor oracle address\"},\"totalStaked()\":{\"notice\":\"total ETH staked in the vault (principal only)\"},\"withdraw(uint256)\":{\"notice\":\"Withdraw principal + proportional simple interest.\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/CryptoSavingVault.sol\":\"CryptoSavingsVault\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/utils/ReentrancyGuard.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/ReentrancyGuard.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Contract module that helps prevent reentrant calls to a function.\\n *\\n * Inheriting from `ReentrancyGuard` will make the {nonReentrant} modifier\\n * available, which can be applied to functions to make sure there are no nested\\n * (reentrant) calls to them.\\n *\\n * Note that because there is a single `nonReentrant` guard, functions marked as\\n * `nonReentrant` may not call one another. This can be worked around by making\\n * those functions `private`, and then adding `external` `nonReentrant` entry\\n * points to them.\\n *\\n * TIP: If you would like to learn more about reentrancy and alternative ways\\n * to protect against it, check out our blog post\\n * https://blog.openzeppelin.com/reentrancy-after-istanbul/[Reentrancy After Istanbul].\\n */\\nabstract contract ReentrancyGuard {\\n    // Booleans are more expensive than uint256 or any type that takes up a full\\n    // word because each write operation emits an extra SLOAD to first read the\\n    // slot's contents, replace the bits taken up by the boolean, and then write\\n    // back. This is the compiler's defense against contract upgrades and\\n    // pointer aliasing, and it cannot be disabled.\\n\\n    // The values being non-zero value makes deployment a bit more expensive,\\n    // but in exchange the refund on every call to nonReentrant will be lower in\\n    // amount. Since refunds are capped to a percentage of the total\\n    // transaction's gas, it is best to keep them low in cases like this one, to\\n    // increase the likelihood of the full refund coming into effect.\\n    uint256 private constant NOT_ENTERED = 1;\\n    uint256 private constant ENTERED = 2;\\n\\n    uint256 private _status;\\n\\n    /**\\n     * @dev Unauthorized reentrant call.\\n     */\\n    error ReentrancyGuardReentrantCall();\\n\\n    constructor() {\\n        _status = NOT_ENTERED;\\n    }\\n\\n    /**\\n     * @dev Prevents a contract from calling itself, directly or indirectly.\\n     * Calling a `nonReentrant` function from another `nonReentrant`\\n     * function is not supported. It is possible to prevent this from happening\\n     * by making the `nonReentrant` function external, and making it call a\\n     * `private` function that does the actual work.\\n     */\\n    modifier nonReentrant() {\\n        _nonReentrantBefore();\\n        _;\\n        _nonReentrantAfter();\\n    }\\n\\n    function _nonReentrantBefore() private {\\n        // On the first call to nonReentrant, _status will be NOT_ENTERED\\n        if (_status == ENTERED) {\\n            revert ReentrancyGuardReentrantCall();\\n        }\\n\\n        // Any calls to nonReentrant after this point will fail\\n        _status = ENTERED;\\n    }\\n\\n    function _nonReentrantAfter() private {\\n        // By storing the original value once again, a refund is triggered (see\\n        // https://eips.ethereum.org/EIPS/eip-2200)\\n        _status = NOT_ENTERED;\\n    }\\n\\n    /**\\n     * @dev Returns true if the reentrancy guard is currently set to \\\"entered\\\", which indicates there is a\\n     * `nonReentrant` function in the call stack.\\n     */\\n    function _reentrancyGuardEntered() internal view returns (bool) {\\n        return _status == ENTERED;\\n    }\\n}\\n\",\"keccak256\":\"0xf980daa263b661ab8ddee7d4fd833c7da7e7995e2c359ff1f17e67e4112f2236\",\"license\":\"MIT\"},\"contracts/CryptoSavingVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"@openzeppelin/contracts/utils/ReentrancyGuard.sol\\\";\\nimport \\\"./interfaces/ITellor.sol\\\";\\n\\n/**\\n * @title CryptoSavingsVault\\n * @dev Simple ETH savings vault with per-user simple interest.\\n *      APR dynamically changes based on ETH/USD price from the Tellor oracle.\\n *\\n * Logic:\\n *  - If ETH < $3000 \\u2192 APR = 6%\\n *  - If ETH \\u2265 $3000 \\u2192 APR = 3%\\n *\\n *  APR is in basis points:\\n *      600 \\u2192 6%\\n *      300 \\u2192 3%\\n *\\n *  Simple Interest Formula:\\n *      interest = principal * aprBps * timeElapsed / (365 days * 10000)\\n */\\ncontract CryptoSavingsVault is ReentrancyGuard {\\n    // ============ State Variables ============\\n\\n    /// @notice principal staked per user (in wei)\\n    mapping(address => uint256) public balances;\\n\\n    /// @notice timestamp when user last updated stake (for interest calculation)\\n    mapping(address => uint256) public stakeTimestamps;\\n\\n    /// @notice interest accumulated but not yet withdrawn (in wei)\\n    mapping(address => uint256) public accruedInterest;\\n\\n    /// @notice total ETH staked in the vault (principal only)\\n    uint256 public totalStaked;\\n\\n    /// @notice Tellor oracle address\\n    address public tellorOracle;\\n\\n    /// @notice APR when ETH < $3000 (6%)\\n    uint256 public constant HIGH_APR = 600;\\n\\n    /// @notice APR when ETH >= $3000 (3%)\\n    uint256 public constant LOW_APR = 300;\\n\\n    /// @notice Basis points denominator\\n    uint256 public constant BPS_DENOM = 10000;\\n\\n    /// @notice Threshold for switching APR (18 decimals)\\n    uint256 public constant ETH_THRESHOLD = 3000e18;\\n\\n    /// @notice Tellor query id for ETH/USD\\n    bytes32 public constant ETH_QUERY_ID = keccak256(\\\"ETH/USD\\\");\\n\\n    // ============ Events ============\\n\\n    event Staked(address indexed user, uint256 amount, uint256 timestamp);\\n    event Withdrawn(address indexed user, uint256 principal, uint256 interest, uint256 timestamp);\\n\\n    // ============ Constructor ============\\n\\n    constructor(address _tellorOracle) {\\n        tellorOracle = _tellorOracle;\\n    }\\n\\n    // ============ Core Functions ============\\n\\n    /**\\n     * @notice Stake ETH into the vault.\\n     * Moves any pending interest into accruedInterest & resets timestamp.\\n     */\\n    function stake() public payable nonReentrant {\\n        require(msg.value > 0, \\\"Amount must be > 0\\\");\\n\\n        // If user already staked, add pending interest to accrued pool\\n        if (balances[msg.sender] > 0 && stakeTimestamps[msg.sender] != 0) {\\n            uint256 pending = _calculatePendingInterest(msg.sender);\\n            if (pending > 0) {\\n                accruedInterest[msg.sender] += pending;\\n            }\\n        }\\n\\n        // Increase principal & update timestamp\\n        balances[msg.sender] += msg.value;\\n        stakeTimestamps[msg.sender] = block.timestamp;\\n        totalStaked += msg.value;\\n\\n        emit Staked(msg.sender, msg.value, block.timestamp);\\n    }\\n\\n    /**\\n     * @notice Withdraw principal + proportional simple interest.\\n     */\\n    function withdraw(uint256 amount) external nonReentrant {\\n        require(amount > 0, \\\"Amount must be > 0\\\");\\n        uint256 principal = balances[msg.sender];\\n        require(principal >= amount, \\\"Insufficient balance\\\");\\n\\n        // Calculate total interest (accrued + pending)\\n        uint256 pending = _calculatePendingInterest(msg.sender);\\n        uint256 totalInterestAvailable = accruedInterest[msg.sender] + pending;\\n\\n        // User withdraws interest proportional to the amount withdrawn\\n        uint256 interestForWithdraw = 0;\\n        if (totalInterestAvailable > 0 && principal > 0) {\\n            interestForWithdraw = (totalInterestAvailable * amount) / principal;\\n        }\\n\\n        // Update bookkeeping\\n        balances[msg.sender] = principal - amount;\\n        totalStaked -= amount;\\n\\n        uint256 remainingInterest = totalInterestAvailable - interestForWithdraw;\\n        accruedInterest[msg.sender] = remainingInterest;\\n\\n        // Reset timestamp for remaining principal\\n        if (balances[msg.sender] > 0) {\\n            stakeTimestamps[msg.sender] = block.timestamp;\\n        } else {\\n            stakeTimestamps[msg.sender] = 0;\\n        }\\n\\n        // Pay ETH\\n        uint256 payout = amount + interestForWithdraw;\\n        (bool sent, ) = msg.sender.call{ value: payout }(\\\"\\\");\\n        require(sent, \\\"ETH transfer failed\\\");\\n\\n        emit Withdrawn(msg.sender, amount, interestForWithdraw, block.timestamp);\\n    }\\n\\n    // ============ Oracle-Based APR Logic ============\\n\\n    /**\\n     * @notice Return current APR in basis points depending on ETH price.\\n     */\\n    function getCurrentAPR() public view returns (uint256) {\\n        uint256 ethPrice = getETHPrice();\\n        return (ethPrice < ETH_THRESHOLD) ? HIGH_APR : LOW_APR;\\n    }\\n\\n    /**\\n     * @notice Get ETH/USD price from Tellor (18 decimals).\\n     * Fallback \\u2192 threshold (forces LOW_APR).\\n     */\\n    function getETHPrice() public view returns (uint256) {\\n        if (tellorOracle == address(0)) return ETH_THRESHOLD;\\n\\n        try ITellor(tellorOracle).getCurrentValue(ETH_QUERY_ID) returns (\\n            bool ifRetrieve,\\n            bytes memory value,\\n            uint256 /*timestamp*/\\n        ) {\\n            if (!ifRetrieve || value.length == 0) return ETH_THRESHOLD;\\n\\n            uint256 decoded = abi.decode(value, (uint256));\\n            if (decoded == 0) return ETH_THRESHOLD;\\n\\n            return decoded;\\n        } catch {\\n            return ETH_THRESHOLD;\\n        }\\n    }\\n\\n    // ============ View Helpers ============\\n\\n    function calculateInterest(address user) public view returns (uint256) {\\n        return accruedInterest[user] + _calculatePendingInterest(user);\\n    }\\n\\n    function getTotalBalance(address user) external view returns (uint256) {\\n        return balances[user] + calculateInterest(user);\\n    }\\n\\n    // ============ Internal ============\\n\\n    function _calculatePendingInterest(address user) internal view returns (uint256) {\\n        uint256 principal = balances[user];\\n        if (principal == 0) return 0;\\n\\n        uint256 ts = stakeTimestamps[user];\\n        if (ts == 0) return 0;\\n\\n        uint256 dt = block.timestamp - ts;\\n        if (dt == 0) return 0;\\n\\n        uint256 aprBps = getCurrentAPR();\\n\\n        uint256 numerator = principal * aprBps * dt;\\n        uint256 denom = 365 days * BPS_DENOM;\\n\\n        return numerator / denom;\\n    }\\n\\n    // ============ Admin ============\\n\\n    function setTellorOracle(address _tellor) external {\\n        tellorOracle = _tellor;\\n    }\\n\\n    // ============ Fallback ============\\n\\n    receive() external payable {\\n        stake();\\n    }\\n}\\n\",\"keccak256\":\"0xe4c95136bc7924928c4794efed62b7a3e2b9bc8465706f3e85bc1bc497e0170c\",\"license\":\"MIT\"},\"contracts/interfaces/ITellor.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\n/**\\n * @title ITellor\\n * @dev Simplified Tellor oracle interface for reading data\\n * This is a minimal interface for the bootcamp project\\n * Full Tellor docs: https://docs.tellor.io\\n */\\ninterface ITellor {\\n    /**\\n     * @dev Retrieve value from oracle based on queryId\\n     * @param _queryId The ID of the data requested\\n     * @param _timestamp The timestamp to retrieve data from\\n     * @return _value The value retrieved\\n     * @return _timestampRetrieved The timestamp when data was retrieved\\n     */\\n    function getDataBefore(bytes32 _queryId, uint256 _timestamp)\\n        external\\n        view\\n        returns (bytes memory _value, uint256 _timestampRetrieved);\\n\\n    /**\\n     * @dev Get the latest value for a queryId\\n     * @param _queryId The ID of the data requested\\n     * @return _ifRetrieve Whether the value was successfully retrieved\\n     * @return _value The value retrieved\\n     * @return _timestampRetrieved The timestamp of the value\\n     */\\n    function getCurrentValue(bytes32 _queryId)\\n        external\\n        view\\n        returns (bool _ifRetrieve, bytes memory _value, uint256 _timestampRetrieved);\\n}\",\"keccak256\":\"0x8dc572e4aa2ceb6ec7bedbc66c0a34c7a32a62536924e02d9307a15b034d1c08\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b50604051610c6f380380610c6f83398101604081905261002f91610059565b6001600055600580546001600160a01b0319166001600160a01b0392909216919091179055610089565b60006020828403121561006b57600080fd5b81516001600160a01b038116811461008257600080fd5b9392505050565b610bd7806100986000396000f3fe6080604052600436106101025760003560e01c8063817b1cd211610095578063a607a8d911610064578063a607a8d91461029a578063d3d38193146102af578063da3f85ff146102cf578063e11932cf14610303578063e6923fae1461032357600080fd5b8063817b1cd21461022b578063910ace5d1461024157806399f853a514610257578063a30df78c1461028457600080fd5b80633a4b66f1116100d15780633a4b66f1146101a85780635ed0ab72146101b05780636637e38c146101e857806377267ec3146101fe57600080fd5b806321ae05c81461011657806327e235e31461013e5780632e1a7d4d1461016b57806331c20fb31461018b57600080fd5b366101115761010f610360565b005b600080fd5b34801561012257600080fd5b5061012b6104b0565b6040519081526020015b60405180910390f35b34801561014a57600080fd5b5061012b6101593660046109c8565b60016020526000908152604090205481565b34801561017757600080fd5b5061010f6101863660046109f8565b6104df565b34801561019757600080fd5b5061012b68a2a15d09519be0000081565b61010f610360565b3480156101bc57600080fd5b506005546101d0906001600160a01b031681565b6040516001600160a01b039091168152602001610135565b3480156101f457600080fd5b5061012b61271081565b34801561020a57600080fd5b5061012b6102193660046109c8565b60036020526000908152604090205481565b34801561023757600080fd5b5061012b60045481565b34801561024d57600080fd5b5061012b61025881565b34801561026357600080fd5b5061012b6102723660046109c8565b60026020526000908152604090205481565b34801561029057600080fd5b5061012b61012c81565b3480156102a657600080fd5b5061012b61075e565b3480156102bb57600080fd5b5061012b6102ca3660046109c8565b610878565b3480156102db57600080fd5b5061012b7f0b43555ace6b39aae1b894097d0a9fc17f504c62fea598fa206cc6f5088e6e4581565b34801561030f57600080fd5b5061012b61031e3660046109c8565b6108ac565b34801561032f57600080fd5b5061010f61033e3660046109c8565b600580546001600160a01b0319166001600160a01b0392909216919091179055565b6103686108da565b600034116103b25760405162461bcd60e51b81526020600482015260126024820152710416d6f756e74206d757374206265203e20360741b60448201526064015b60405180910390fd5b33600090815260016020526040902054158015906103de57503360009081526002602052604090205415155b1561041d5760006103ee33610904565b9050801561041b573360009081526003602052604081208054839290610415908490610a27565b90915550505b505b336000908152600160205260408120805434929061043c908490610a27565b909155505033600090815260026020526040812042905560048054349290610465908490610a27565b90915550506040805134815242602082015233917f1449c6dd7851abc30abf37f57715f492010519147cc2652fbc38202c18a6ee90910160405180910390a26104ae6001600055565b565b6000806104bb61075e565b905068a2a15d09519be0000081106104d55761012c6104d9565b6102585b91505090565b6104e76108da565b6000811161052c5760405162461bcd60e51b81526020600482015260126024820152710416d6f756e74206d757374206265203e20360741b60448201526064016103a9565b33600090815260016020526040902054818110156105835760405162461bcd60e51b8152602060048201526014602482015273496e73756666696369656e742062616c616e636560601b60448201526064016103a9565b600061058e33610904565b33600090815260036020526040812054919250906105ad908390610a27565b9050600080821180156105c05750600084115b156105dd57836105d08684610a3a565b6105da9190610a51565b90505b6105e78585610a73565b336000908152600160205260408120919091556004805487929061060c908490610a73565b909155506000905061061e8284610a73565b33600090815260036020908152604080832084905560019091529020549091501561065a5733600090815260026020526040902042905561066b565b336000908152600260205260408120555b60006106778388610a27565b604051909150600090339083908381818185875af1925050503d80600081146106bc576040519150601f19603f3d011682016040523d82523d6000602084013e6106c1565b606091505b50509050806107085760405162461bcd60e51b8152602060048201526013602482015272115512081d1c985b9cd9995c8819985a5b1959606a1b60448201526064016103a9565b60408051898152602081018690524281830152905133917f75e161b3e824b114fc1a33274bd7091918dd4e639cede50b78b15a4eea956a21919081900360600190a25050505050505061075b6001600055565b50565b6005546000906001600160a01b031661077f575068a2a15d09519be0000090565b60055460405163adf1639d60e01b81527f0b43555ace6b39aae1b894097d0a9fc17f504c62fea598fa206cc6f5088e6e4560048201526001600160a01b039091169063adf1639d90602401600060405180830381865afa92505050801561080857506040513d6000823e601f3d908101601f191682016040526108059190810190610a9c565b60015b61081a575068a2a15d09519be0000090565b82158061082657508151155b1561083d5768a2a15d09519be00000935050505090565b6000828060200190518101906108539190610b88565b9050806000036108705768a2a15d09519be0000094505050505090565b949350505050565b6000610883826108ac565b6001600160a01b0383166000908152600160205260409020546108a69190610a27565b92915050565b60006108b782610904565b6001600160a01b0383166000908152600360205260409020546108a69190610a27565b6002600054036108fd57604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b6001600160a01b03811660009081526001602052604081205480820361092d5750600092915050565b6001600160a01b03831660009081526002602052604081205490819003610958575060009392505050565b60006109648242610a73565b90508060000361097957506000949350505050565b60006109836104b0565b90506000826109928387610a3a565b61099c9190610a3a565b905060006109b06127106301e13380610a3a565b90506109bc8183610a51565b98975050505050505050565b6000602082840312156109da57600080fd5b81356001600160a01b03811681146109f157600080fd5b9392505050565b600060208284031215610a0a57600080fd5b5035919050565b634e487b7160e01b600052601160045260246000fd5b808201808211156108a6576108a6610a11565b80820281158282048414176108a6576108a6610a11565b600082610a6e57634e487b7160e01b600052601260045260246000fd5b500490565b818103818111156108a6576108a6610a11565b634e487b7160e01b600052604160045260246000fd5b600080600060608486031215610ab157600080fd5b83518015158114610ac157600080fd5b8093505060208085015167ffffffffffffffff80821115610ae157600080fd5b818701915087601f830112610af557600080fd5b815181811115610b0757610b07610a86565b604051601f8201601f19908116603f01168101908382118183101715610b2f57610b2f610a86565b816040528281528a86848701011115610b4757600080fd5b600093505b82841015610b695784840186015181850187015292850192610b4c565b6000868483010152809750505050505050604084015190509250925092565b600060208284031215610b9a57600080fd5b505191905056fea2646970667358221220e11b3a6dea1cfa43609faed5e2809bf3eb900599f1b7520a88eed1aae15cd28864736f6c63430008140033",
  "deployedBytecode": "0x6080604052600436106101025760003560e01c8063817b1cd211610095578063a607a8d911610064578063a607a8d91461029a578063d3d38193146102af578063da3f85ff146102cf578063e11932cf14610303578063e6923fae1461032357600080fd5b8063817b1cd21461022b578063910ace5d1461024157806399f853a514610257578063a30df78c1461028457600080fd5b80633a4b66f1116100d15780633a4b66f1146101a85780635ed0ab72146101b05780636637e38c146101e857806377267ec3146101fe57600080fd5b806321ae05c81461011657806327e235e31461013e5780632e1a7d4d1461016b57806331c20fb31461018b57600080fd5b366101115761010f610360565b005b600080fd5b34801561012257600080fd5b5061012b6104b0565b6040519081526020015b60405180910390f35b34801561014a57600080fd5b5061012b6101593660046109c8565b60016020526000908152604090205481565b34801561017757600080fd5b5061010f6101863660046109f8565b6104df565b34801561019757600080fd5b5061012b68a2a15d09519be0000081565b61010f610360565b3480156101bc57600080fd5b506005546101d0906001600160a01b031681565b6040516001600160a01b039091168152602001610135565b3480156101f457600080fd5b5061012b61271081565b34801561020a57600080fd5b5061012b6102193660046109c8565b60036020526000908152604090205481565b34801561023757600080fd5b5061012b60045481565b34801561024d57600080fd5b5061012b61025881565b34801561026357600080fd5b5061012b6102723660046109c8565b60026020526000908152604090205481565b34801561029057600080fd5b5061012b61012c81565b3480156102a657600080fd5b5061012b61075e565b3480156102bb57600080fd5b5061012b6102ca3660046109c8565b610878565b3480156102db57600080fd5b5061012b7f0b43555ace6b39aae1b894097d0a9fc17f504c62fea598fa206cc6f5088e6e4581565b34801561030f57600080fd5b5061012b61031e3660046109c8565b6108ac565b34801561032f57600080fd5b5061010f61033e3660046109c8565b600580546001600160a01b0319166001600160a01b0392909216919091179055565b6103686108da565b600034116103b25760405162461bcd60e51b81526020600482015260126024820152710416d6f756e74206d757374206265203e20360741b60448201526064015b60405180910390fd5b33600090815260016020526040902054158015906103de57503360009081526002602052604090205415155b1561041d5760006103ee33610904565b9050801561041b573360009081526003602052604081208054839290610415908490610a27565b90915550505b505b336000908152600160205260408120805434929061043c908490610a27565b909155505033600090815260026020526040812042905560048054349290610465908490610a27565b90915550506040805134815242602082015233917f1449c6dd7851abc30abf37f57715f492010519147cc2652fbc38202c18a6ee90910160405180910390a26104ae6001600055565b565b6000806104bb61075e565b905068a2a15d09519be0000081106104d55761012c6104d9565b6102585b91505090565b6104e76108da565b6000811161052c5760405162461bcd60e51b81526020600482015260126024820152710416d6f756e74206d757374206265203e20360741b60448201526064016103a9565b33600090815260016020526040902054818110156105835760405162461bcd60e51b8152602060048201526014602482015273496e73756666696369656e742062616c616e636560601b60448201526064016103a9565b600061058e33610904565b33600090815260036020526040812054919250906105ad908390610a27565b9050600080821180156105c05750600084115b156105dd57836105d08684610a3a565b6105da9190610a51565b90505b6105e78585610a73565b336000908152600160205260408120919091556004805487929061060c908490610a73565b909155506000905061061e8284610a73565b33600090815260036020908152604080832084905560019091529020549091501561065a5733600090815260026020526040902042905561066b565b336000908152600260205260408120555b60006106778388610a27565b604051909150600090339083908381818185875af1925050503d80600081146106bc576040519150601f19603f3d011682016040523d82523d6000602084013e6106c1565b606091505b50509050806107085760405162461bcd60e51b8152602060048201526013602482015272115512081d1c985b9cd9995c8819985a5b1959606a1b60448201526064016103a9565b60408051898152602081018690524281830152905133917f75e161b3e824b114fc1a33274bd7091918dd4e639cede50b78b15a4eea956a21919081900360600190a25050505050505061075b6001600055565b50565b6005546000906001600160a01b031661077f575068a2a15d09519be0000090565b60055460405163adf1639d60e01b81527f0b43555ace6b39aae1b894097d0a9fc17f504c62fea598fa206cc6f5088e6e4560048201526001600160a01b039091169063adf1639d90602401600060405180830381865afa92505050801561080857506040513d6000823e601f3d908101601f191682016040526108059190810190610a9c565b60015b61081a575068a2a15d09519be0000090565b82158061082657508151155b1561083d5768a2a15d09519be00000935050505090565b6000828060200190518101906108539190610b88565b9050806000036108705768a2a15d09519be0000094505050505090565b949350505050565b6000610883826108ac565b6001600160a01b0383166000908152600160205260409020546108a69190610a27565b92915050565b60006108b782610904565b6001600160a01b0383166000908152600360205260409020546108a69190610a27565b6002600054036108fd57604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b6001600160a01b03811660009081526001602052604081205480820361092d5750600092915050565b6001600160a01b03831660009081526002602052604081205490819003610958575060009392505050565b60006109648242610a73565b90508060000361097957506000949350505050565b60006109836104b0565b90506000826109928387610a3a565b61099c9190610a3a565b905060006109b06127106301e13380610a3a565b90506109bc8183610a51565b98975050505050505050565b6000602082840312156109da57600080fd5b81356001600160a01b03811681146109f157600080fd5b9392505050565b600060208284031215610a0a57600080fd5b5035919050565b634e487b7160e01b600052601160045260246000fd5b808201808211156108a6576108a6610a11565b80820281158282048414176108a6576108a6610a11565b600082610a6e57634e487b7160e01b600052601260045260246000fd5b500490565b818103818111156108a6576108a6610a11565b634e487b7160e01b600052604160045260246000fd5b600080600060608486031215610ab157600080fd5b83518015158114610ac157600080fd5b8093505060208085015167ffffffffffffffff80821115610ae157600080fd5b818701915087601f830112610af557600080fd5b815181811115610b0757610b07610a86565b604051601f8201601f19908116603f01168101908382118183101715610b2f57610b2f610a86565b816040528281528a86848701011115610b4757600080fd5b600093505b82841015610b695784840186015181850187015292850192610b4c565b6000868483010152809750505050505050604084015190509250925092565b600060208284031215610b9a57600080fd5b505191905056fea2646970667358221220e11b3a6dea1cfa43609faed5e2809bf3eb900599f1b7520a88eed1aae15cd28864736f6c63430008140033",
  "devdoc": {
    "details": "Simple ETH savings vault with per-user simple interest.      APR dynamically changes based on ETH/USD price from the Tellor oracle. Logic:  - If ETH < $3000 → APR = 6%  - If ETH ≥ $3000 → APR = 3%  APR is in basis points:      600 → 6%      300 → 3%  Simple Interest Formula:      interest = principal * aprBps * timeElapsed / (365 days * 10000)",
    "errors": {
      "ReentrancyGuardReentrantCall()": [
        {
          "details": "Unauthorized reentrant call."
        }
      ]
    },
    "kind": "dev",
    "methods": {},
    "title": "CryptoSavingsVault",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "BPS_DENOM()": {
        "notice": "Basis points denominator"
      },
      "ETH_QUERY_ID()": {
        "notice": "Tellor query id for ETH/USD"
      },
      "ETH_THRESHOLD()": {
        "notice": "Threshold for switching APR (18 decimals)"
      },
      "HIGH_APR()": {
        "notice": "APR when ETH < $3000 (6%)"
      },
      "LOW_APR()": {
        "notice": "APR when ETH >= $3000 (3%)"
      },
      "accruedInterest(address)": {
        "notice": "interest accumulated but not yet withdrawn (in wei)"
      },
      "balances(address)": {
        "notice": "principal staked per user (in wei)"
      },
      "getCurrentAPR()": {
        "notice": "Return current APR in basis points depending on ETH price."
      },
      "getETHPrice()": {
        "notice": "Get ETH/USD price from Tellor (18 decimals). Fallback → threshold (forces LOW_APR)."
      },
      "stake()": {
        "notice": "Stake ETH into the vault. Moves any pending interest into accruedInterest & resets timestamp."
      },
      "stakeTimestamps(address)": {
        "notice": "timestamp when user last updated stake (for interest calculation)"
      },
      "tellorOracle()": {
        "notice": "Tellor oracle address"
      },
      "totalStaked()": {
        "notice": "total ETH staked in the vault (principal only)"
      },
      "withdraw(uint256)": {
        "notice": "Withdraw principal + proportional simple interest."
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 10,
        "contract": "contracts/CryptoSavingVault.sol:CryptoSavingsVault",
        "label": "_status",
        "offset": 0,
        "slot": "0",
        "type": "t_uint256"
      },
      {
        "astId": 80,
        "contract": "contracts/CryptoSavingVault.sol:CryptoSavingsVault",
        "label": "balances",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 85,
        "contract": "contracts/CryptoSavingVault.sol:CryptoSavingsVault",
        "label": "stakeTimestamps",
        "offset": 0,
        "slot": "2",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 90,
        "contract": "contracts/CryptoSavingVault.sol:CryptoSavingsVault",
        "label": "accruedInterest",
        "offset": 0,
        "slot": "3",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 93,
        "contract": "contracts/CryptoSavingVault.sol:CryptoSavingsVault",
        "label": "totalStaked",
        "offset": 0,
        "slot": "4",
        "type": "t_uint256"
      },
      {
        "astId": 96,
        "contract": "contracts/CryptoSavingVault.sol:CryptoSavingsVault",
        "label": "tellorOracle",
        "offset": 0,
        "slot": "5",
        "type": "t_address"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_mapping(t_address,t_uint256)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}